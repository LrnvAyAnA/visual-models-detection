# Проектные решения для API системы распознавания визуальных моделей

## 1. Архитектура API

API разработан в соответствии с принципами RESTful. Каждое действие связано с конкретным ресурсом, а HTTP-методы (GET, POST, PUT, DELETE) определяют тип операции над ресурсом.

## 2. Формат данных

Все данные передаются и возвращаются в формате JSON. Это обеспечивает читаемость данных и легкость их обработки на клиентской стороне.

## 3. Эндпоинты

Эндпоинты организованы по ресурсам. Для ресурсов предусмотрены стандартные CRUD-операции:

- `/images`: управление загружаемыми изображениями.
- `/results`: доступ к результатам распознавания.
- `/nodes`: работа с отдельными узлами диаграммы.

## 4. Методы API

Для взаимодействия с API используются следующие методы:

- **GET**: получение данных.
- **POST**: создание нового ресурса.
- **PUT**: обновление существующего ресурса.
- **DELETE**: удаление ресурса.

## 5. Стандарты HTTP-ответов

Для работы с API предусмотрены стандартизированные коды и сообщения:

- **200 OK**: успешная операция.
- **201 Created**: ресурс успешно создан.
- **400 Bad Request**: ошибка в запросе клиента.
- **404 Not Found**: запрашиваемый ресурс не найден.

## 6. Валидация входных данных
Реализована проверка корректности входных данных в методах POST и PUT. Например:

- Проверяется наличие обязательных полей (image_id, format) для экспорта.
- Формат данных проверяется на соответствие (например, число вместо строки).

## 7. Гибкость API (расширяемость)
Принято решение заложить возможность добавления новых форматов экспорта (например, PlantUML). Для этого добавлен эндпоинт /results/export, где параметр format может быть расширен.

## 8. Простое хранилище данных
На текущем этапе используется простая структура в виде Python-словаря (data = {}). Это облегчает разработку и тестирование. В будущем возможно подключение базы данных (например, PostgreSQL) для хранения и управления данными.

## 9. Тестирование API через Postman
Для проверки корректной работы всех методов API было принято решение использовать Postman. Это позволяет протестировать запросы, увидеть ответы сервера и зафиксировать результаты.

# Документация по API
Данные передаются в формате `JSON`. Ответы от API также возвращаются в формате `JSON`.

## Реализуемое API
### 1. Загрузка изображения

Метод: `POST`

URL: `/images`

Описание: Создает новое изображение в хранилище. Возвращает уникальный `image_id` для созданного изображения.


### 2. Получение данных об изображении

Метод: `GET`

URL: `/results/<image_id>`

Описание: Возвращает информацию об изображении, включая узлы (`nodes`) и соединения (`connections`).

Коды ответа:

`200 OK`: Данные успешно получены.

`404 Not Found`: Изображение с указанным image_id не найдено.

### 3. Создание узла

Метод: `POST`

URL: `/results/<image_id>/nodes`

Описание: Добавляет новый узел к изображению.

Коды ответа:

`201 Created`: Узел успешно создан.

`404 Not Found`: Изображение с указанным `image_id` не найдено.

### 4. Обновление узла
Метод: `PUT`

URL: `/results/<image_id>/nodes/<node_id>`

Описание: Обновляет информацию об узле с указанным `node_id` в заданном изображении.

Коды ответа:

`200 OK`: Узел успешно обновлен.

`404 Not Found`: Изображение или узел с указанными `image_id` и `node_id` не найдены.

### 5. Удаление изображения

Метод: `DELETE`

URL: `/results/<image_id>`

Описание: Удаляет изображение с указанным `image_id` из хранилища.

Коды ответа:

`200 OK`: Изображение успешно удалено.

`404 Not Found`: Изображение с указанным `image_id` не найдено.

### 6. Получение данных об узле

Метод: `GET`

URL: `/nodes/<node_id>`

Описание: Возвращает информацию об узле с указанным `node_id`.

Коды ответа:

`200 OK`: Узел успешно найден.

`404 Not Found`: Узел с указанным `node_id` не найден.

### 7. Экспорт результатов

Метод: `POST`

URL: `/results/export`

Описание: Экспортирует данные изображения в заданном формате (по умолчанию — JSON).

Коды ответа:

`200 OK`: Данные успешно экспортированы.

`404 Not Found`: Изображение с указанным `image_id` не найдено.

`400 Bad Request`: Указан неподдерживаемый формат.

## Тестирование API
### 1. Загрузка изображения

Метод: `POST`

URL: `/images`

![image](https://github.com/user-attachments/assets/a50361da-0ea9-4893-840f-ef69d5f08b0b)
![image](https://github.com/user-attachments/assets/bde38ecc-ece0-454b-bfda-b8471f33549d)

### 2. Получение данных об изображении

Метод: `GET`

URL: `/results/<image_id>`

![image](https://github.com/user-attachments/assets/40b33428-3806-4c8f-b648-c75a6080814a)
![image](https://github.com/user-attachments/assets/bd7a4b0d-f4b3-4a83-918d-479f7ec92f7f)

### 3. Создание узла

Метод: `POST`

URL: `/results/<image_id>/nodes`

![image](https://github.com/user-attachments/assets/8cf98d08-e573-4e6c-8539-588ecb60f30b)
![image](https://github.com/user-attachments/assets/4275f329-bada-4eef-8dce-7ee8d8669504)

### 4. Обновление узла
Метод: `PUT`

URL: `/results/<image_id>/nodes/<node_id>`

![image](https://github.com/user-attachments/assets/be1948f0-3c00-46a0-963b-ccbeeeb2597d)
![image](https://github.com/user-attachments/assets/2e213a6e-5d10-4c8b-90ee-7d3f3577ba5e)

### 5. Удаление изображения

Метод: `DELETE`

URL: `/results/<image_id>`

![image](https://github.com/user-attachments/assets/3278443f-19b1-4f2a-8808-0df4dc2e17ea)
![image](https://github.com/user-attachments/assets/a6984220-0f3a-43ad-85eb-d69517c03d50)

### 6. Получение данных об узле

Метод: `GET`

URL: `/nodes/<node_id>`

![image](https://github.com/user-attachments/assets/966e0f06-e7ca-46c4-bb19-667296e9eada)
![image](https://github.com/user-attachments/assets/aa40c088-a9f8-4bcb-ad66-5d380a2e8617)

### 7. Экспорт результатов

Метод: `POST`

URL: `/results/export`

![image](https://github.com/user-attachments/assets/305f23f1-93d7-4baf-a903-ed23241c9cae)
![image](https://github.com/user-attachments/assets/15a83fec-ebb0-4e71-87e7-f4a37c3341d7)
